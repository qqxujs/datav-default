<!DOCTYPE html> 

本文介绍DataV可视化应用在调试预览界面下的详细功能。 

DataV支持两种可视化应用预览的模式：正常预览和调试预览。 
* 正常预览：在编辑器右上方单击预览图标（![预览图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9169713461/p66740.png)），选择正常预览时，DataV不会记录预览可视化应用时的报错和日志。
* 调试预览：在编辑器右上方单击预览图标（![预览图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9169713461/p66740.png)），选择调试预览时，DataV将记录在预览可视化应用时组件和蓝图内的交互日志和报错信息。

**说明** 
* 调试预览功能仅支持PC端可视化应用，移动端可视化应用不支持调试预览。
* 进入调试预览界面后，默认开启日志和报错记录。

## 蓝图日志&报错功能介绍

使用前提：要使用蓝图日志&报错功能，首先需要在蓝图编辑器界面内，将需要被监听的连线选中，并右键单击记录日志。![记录日志](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0290888951/p80769.png)在调试预览界面产生交互行为时，如果命中记录日志的交互，则记录这次连线交互的上下游节点关系和交互触发时产生的数据快照。 

在进入调试预览界面后，单击左侧边缘的开启调试，选择蓝图日志&报错界面，在当前可进行如下操作： 
* 开始记录/暂停记录：单击记录![记录](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4176329461/p113580.png)图标，切换到开始记录即可监听蓝图日志和报错或暂停记录模式即可关闭监听。  

**说明** 为了避免日志刷新时影响可视化应用的性能，建议用户在预览调试可视化应用时关闭数据的自动更新，或增加数据自动更新时长。
* 清空日志：单击清空日志图标，即可清除当前界面所有日志或报错内容。
* 日志记录：每次新的交互后，将在原来的日志记录的最上方新增一条记录。单击打开某个日志记录，选择日志记录中的连线，右侧会弹出数据快照框，框内将进一步说明报错时的数据、回调ID（如有）、页面临时变量（如有）以及报错堆栈等情况。![记录日志样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4176329461/p80775.png)
  * 记录交互日志如遇到报错时，连线会被标记为红色。单击红色连线，在数据快照框内展示错误堆栈。![报错信息面板](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1290888951/p80779.png)
  * 记录交互日志没有报错时，连线为蓝色。

**说明** 在连线左侧的逻辑节点中，若使用了getLocalValue和getCallbackValue，获取到了回调ID和临时变量，才会记录在localValue和callbackValue的数据快照中。
* 复制节点ID：双击记录内的节点，可复制节点ID。可以将复制的ID在蓝图编辑器界面中进行搜索和定位。![节点复制ID](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1290888951/p80780.png)

## 组件日志&报错功能介绍

在进入调试预览界面后，单击左侧边缘的开启调试，选择组件日志&报错界面，在当前可进行如下操作： 
* 开始记录/暂停记录：单击记录![记录](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4176329461/p113580.png)图标，切换到开始记录即可监听组件日志和报错或暂停记录模式即可关闭监听。  

**说明** 为了避免日志刷新时影响可视化应用的性能，建议用户在预览调试可视化应用时关闭数据的自动更新，或增加数据自动更新时长。
* 清空日志：单击清空日志图标，即可清除当前界面所有日志或报错内容。
* 日志记录：当组件请求发生错误时，面板内会将在原来的记录的最上方新增一条报错记录。单击选择一个报错记录，右侧会弹出数据快照框，框内将进一步说明报错时的数据、回调ID（如有）、页面临时变量（如有）以及报错堆栈情况。![记录报错样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4176329461/p80786.png)  
__表 1\. 组件日志记录的常见报错类型__
|    报错类型    |    类型说明    |
|    ----    |    ----    |
|    数据源报错    |    组件请求数据源发生错误时，产生该报错。数据源的请求可能发生在组件首次加载时、组件自动更新时、组件回调ID触发更新时、蓝图触发请求数据源动作时。展示报错的组件ID、数据源ID、错误描述。    |
|    过滤器报错    |    组件请求数据源成功返回数据后，经过过滤器时产生报错，将记录为过滤器报错。展示报错的组件ID、数据源ID、过滤器ID、错误描述。    |
|    组件内部报错    |    组件渲染或执行组件方法时产生的报错。选择组件内部报错，展示报错的组件ID、组件方法。    |
|    节点内部报错    |    蓝图节点内代码出现问题时，导致的节点初始化报错等。    |

**说明** 当调用组件方法时的参数不符合组件声明时，将产生警告信息。
* 复制组件ID：双击报错条目内的组件名称，可复制ID到剪贴板。
* 搜索组件ID：将复制到的组件名称，在编辑器中搜索框粘贴即可快速查询到该组件，并根据报错提示去修改组件的配置。
* 筛选组件报错日志：在输入框内输入某个组件名称、组件ID、过滤器ID或报错信息等，即可快速筛选出当前报错面板下所有与输入信息相关联的报错条目。

## 调试窍门

以终为始，用最小粒度记录日志。如遇到当目标组件的交互效果未产生时，可从目标组件的动作开始，往回反查每一步的传入数据是否正确。![调试窍门](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1290888951/p80796.png)