  流式气泡层（v2.x版本）的配置数据与交互详解-DataV数据可视化-阿里云

流式气泡层是基础平面地图的子组件，支持独立的样式和数据配置，包括气泡的大小、位置、颜色、动画效果以及经纬度等，能够以流式气泡的形式表现地理位置上的点数据信息。本文介绍流式气泡层各配置项的含义。

**重要** 当前为v2.x版本的流式气泡层子组件指导文档，如需查看该子组件v1.x版本的文档内容详情，请参见[流式气泡层（v1.x版本）](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/stream-bubble-layer#concept-azx-zlt-cgb)。

## 配置

单击子组件管理下方的流式气泡层，进入配置面板配置流式气泡层的样式和数据。

**说明** 如果子组件管理中没有流式气泡层，说明您还未添加流式气泡层子组件，请参见[地图容器（v2.x版本）](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/map-container#concept-2400968)进行添加。

![流式气泡层配置面板](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1958068951/p81502.jpg)

-   搜索配置：单击配置面板右上角的搜索配置，可在搜索配置面板中输入您需要搜索的配置项名称，快速定位到该配置项，系统支持模糊匹配。详情请参见[搜索资产配置](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/search-for-configurations#task-2376842)。
-   可见级别：设置流式气泡层的可见级别值，在设定的级别范围内流式气泡层可见，级别之外不可见。
-   默认配置：设置流式气泡图标的图片样式路径、图片尺寸和图标偏移量等参数。
    
    参数
    
    说明
    
    图片路径
    
    流式气泡图标的图片。
    
    -   鼠标移动到图片位置，单击删除可删除当前图片，然后单击图片区域或者拖动本地图片到区域内即可添加一个图标图片。
    -   鼠标移动到图片位置，单击更改可重新上传本地图片。
    -   您也可以输入图片的URL地址，将远程服务器上的图片作为流式气泡图标。
    
    图片尺寸
    
    设置图标的宽度和高度，取值范围为0~400，单位为px。
    
    图标偏移量
    
    图标相对于水平方向和垂直方向的偏移量，取值范围为-400~400，单位为px。建议设置为图标宽度的一半来水平居中，设置为图标高度值的一半来垂直居中。
    
    浮框偏移量
    
    浮框相对于水平方向和垂直方向的偏移量，取值范围为-400~400，单位为px。
    
    圆圈样式
    
    设置圆圈的填充颜色、圆圈的半径值、圆圈边线颜色和边线的粗细值。单击圆圈样式左侧的![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标，可控制圆圈样式的显隐。
    
-   浮框配置：设置流式气泡浮框的文本样式、文本对齐和行高比例等参数。
    
    参数
    
    说明
    
    文本样式
    
    设置浮框内文本的字体、文字粗细、字号和颜色。请参见[颜色选择器说明](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/configure-item-description#section-kdw-vj4-t2b)进行颜色修改。
    
    文本对齐
    
    设置流式气泡浮框内信息的多行对齐方式，包括左对齐、居中和右对齐。仅当数据中的info信息设置为多行时有效。
    
    行高比例
    
    设置流式气泡浮框的行高比例值。
    
    外边距
    
    设置流式气泡浮框内文本与浮框四边的距离。
    
    背景配置
    
    设置流式气泡浮框的背景颜色，内容的宽度，浮框圆角半径值，数值越大圆角越圆。
    
    阴影
    
    设置流式气泡浮框的阴影的颜色、阴影模糊度和阴影对于水平方向和垂直方向的偏移量，取值范围为0~50，单位为px。
    
-   动画配置：设置流式气泡浮框动画的缓存、顺序和冒泡数目等参数。
    
    参数
    
    说明
    
    缓存
    
    打开开关，系统会自动缓存您的气泡数据，并且可以自定义缓存条数。当数据发生变化时，系统不会清空您已经缓存的数据。
    
    顺序
    
    打开开关，系统按照数据的顺序进行循环冒泡，关闭开关，系统进行随机冒泡。
    
    冒泡数目
    
    流式气泡每次冒泡的数量，当设置的数目小于数据条数时，系统采用循环冒泡的方式。
    
    平铺时间
    
    流式气泡平铺动画的持续时间，单位为s。
    
    停留时间
    
    流式气泡平铺动画的停留时间，单位为s。
    
    消失时间
    
    流式气泡平铺动画的消失时间，单位为s。
    

## 数据

![流式气泡层数据面板V2.x](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6901884261/p81498.jpg)

表 1. 字段说明

字段

说明

lat

流式气泡的纬度。

lng

流式气泡的经度。

info

流式气泡的文本信息，可自定义，支持使用`</br>`换行，例如`自定义信息</br>自定义信息`。

表 2. 配置项说明

配置项

说明

受控模式

打开开关，资产初始化状态下不请求数据，仅通过回调ID或蓝图编辑器配置的方法发起请求数据；关闭开关，可以使用自动更新请求数据。开关默认为关闭状态。

自动更新请求

选中后可以设置动态轮询，还可以手动输入轮询的时间频次。取消选中后则不会自动更新，需要手动刷新页面，或通过蓝图编辑器和回调ID事件来触发请求更新数据。

数据源

单击配置数据源，可在设置数据源面板中修改数据源类型和数据查询代码、预览数据源返回结果以及查看数据响应结果，详情请参见[配置资产数据](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/configure-widget-data#task-2376875)。

数据过滤器

数据过滤器提供数据结构转换、筛选和一些简单的计算功能。单击添加过滤器，可在设置数据源面板配置数据过滤器脚本，详情请参见[过滤器使用说明](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/use-the-data-filter#task-1322674)。

数据响应结果

展示数据请求的响应结果。当数据源发生改变时，可单击右侧的![刷新图标 ](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0376703061/p89093.png)图标，实时查看数据响应结果。

## 交互

此组件没有交互事件。

## 蓝图编辑器交互配置

1.  在画布编辑器页面，单击基础平面地图子组件管理列表中流式气泡层右侧的![导出到蓝图编辑器](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2434449951/p89089.jpg)图标。
2.  单击页面左上角的![蓝图图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2434449951/p89087.jpg)图标。
3.  在蓝图编辑器配置页面，单击导入节点栏内的流式气泡层组件，在画布中可以看到如下图所示的流式气泡层的蓝图编辑器配置参数。![流式气泡层V2.x蓝图编辑器参数](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6901884261/p81501.jpg)
    -   事件
        
        事件
        
        说明
        
        当数据接口请求完成时
        
        数据接口请求返回并经过过滤器处理后抛出的事件，同时抛出处理后的JSON格式的数据。具体数据示例请参见画布编辑器中组件右侧配置面板数据页签的数据响应结果区域。
        
        当数据接口请求失败时
        
        数据接口请求失败时（请求失败的情况可能是：网络问题或接口报错等）返回并经过过滤器处理后抛出的事件，同时抛出处理后的JSON格式的数据。具体数据示例请参见画布编辑器中组件右侧配置面板数据页签的数据响应结果区域。
        
    -   动作
        
        动作
        
        说明
        
        请求数据接口
        
        重新请求服务端数据，上游数据处理节点或图层节点抛出的数据将作为参数。例如矢量散点层配置了API数据源为`https://api.test`，传到请求数据接口动作的数据为`{ id: '1'}`，则最终请求接口为`https://api.test?id=1`。
        
        导入数据接口
        
        按组件绘制格式处理数据后，导入组件，重新绘制。不需要重新请求服务端数据。具体数据示例请参见画布编辑器中组件右侧配置面板数据页签的数据响应结果区域。
        
        显示
        
        显示组件，不需要参数。
        
        隐藏
        
        隐藏组件，不需要参数。