 

本文介绍时间轴全量选择时各配置项的含义。

## **图表样式**

时间轴支持自定义时间轴的节点标签样式、事件节点样式以及交互等配置，适用于在可视化应用中展示不同时间段的数据变化情况，比如使用时间轴组件实现数据轮播。![image.png](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3227002961/p705796.png)

## 样式面板![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4588141171/p783291.png)

-   **搜索配置**：单击**样式**面板右上角的搜索配置项图标![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5013889661/p527384.png)，可在搜索配置面板中输入您需要搜索的配置项名称，快速定位到该配置项，系统支持模糊匹配。详情请参见[搜索配置项](https://help.aliyun.com/zh/datav/datav-7-0/user-guide/configuration-items#b14c340069fac)。
    
-   -   **尺寸**：包括组件的宽度和高度，单位为px。
        
    -   **定位**：包括组件的**横坐标**和**纵坐标**，单位为px。**横坐标**为组件左上角距离页面左边界的像素距离，**纵坐标**为组件左上角距离页面上边界的像素距离。
        
    -   **旋转**：以组件的中心为中心点，进行旋转，单位为度（°）。
        
        -   手动输入角度值，控制组件的旋转角度。
            
        -   单击![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8222919661/p521797.png)图标，控制组件左右翻转样式。
            
        -   单击![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8222919661/p521798.png)图标，控制组件上下翻转样式。
            
    -   **不透明度**：取值范围为0~1。为**0**时，图表隐藏；为**1**时，图表全部显示。默认为**1**。
        
-   **全局样式**
    
    **参数**
    
    **说明**
    
    **字体**
    
    组件中所有文本的字体系列，默认为**微软雅黑**。
    
    **轮播**
    
    打开开关，事件会一直循环播放。关闭开关，事件只播放一次。
    
    **间隔时间**
    
    配置一个事件节点到另一个事件节点所需要的时间。
    
    **停留时间**
    
    配置在一个事件节点上停留的时间。
    
    **左右边距**
    
    配置开始事件节点和结束事件节点与组件边界之间的水平距离，建议距离不要超过图表宽度的一半。
    
-   **事件节点**
    
    -   **种类**：事件节点的种类，可选：**数值型**、**类目型**和**时间型**。
        
    -   **数据格式**：需要根据数据格式进行配置，例如数据为**1982-02-01 17:09**，则此配置项应该设置为**%Y-%m-%d %H:%M**。只有当事件**种类**为**时间型**时，该配置项才会显示。
        
    -   **节点形状**：节点的形状。
        
    -   **节点大小**：节点的大小。
        
    -   **默认样式**：未选中时节点的样式。
        
        **参数**
        
        **说明**
        
        **节点填充色**
        
        节点的填充颜色，请参见[颜色选择器说明](https://help.aliyun.com/zh/datav/datav-7-0/user-guide/configuration-items#section-kdw-vj4-t2b)进行修改。
        
        **节点边框色**
        
        节点的边框颜色，请参见[颜色选择器说明](https://help.aliyun.com/zh/datav/datav-7-0/user-guide/configuration-items#section-kdw-vj4-t2b)进行修改。
        
        **节点边框粗细**
        
        节点的边框粗细。
        
    -   **选中样式**：节点被选中后的样式。
        
        **参数**
        
        **说明**
        
        **节点填充色**
        
        被选中节点的填充颜色，请参见[颜色选择器说明](https://help.aliyun.com/zh/datav/datav-7-0/user-guide/configuration-items#section-kdw-vj4-t2b)进行修改。
        
        **节点边框色**
        
        被选中节点的边框颜色，请参见[颜色选择器说明](https://help.aliyun.com/zh/datav/datav-7-0/user-guide/configuration-items#section-kdw-vj4-t2b)进行修改。
        
        **节点边框粗细**
        
        被选中节点的边框粗细。
        
-   **节点标签-下**
    
    **参数**
    
    **说明**
    
    **上下偏移**
    
    轴线下侧标签距离水平中心轴的距离。
    
    **旋转角度**
    
    轴线下侧节点标签的旋转角度。
    
    **默认样式**
    
    节点标签的默认字体的大小、颜色和字体的粗细。
    
    **选中样式**
    
    参考上文的默认样式进行配置。
    
-   **节点标签-上**：参考**节点标签-下**进行配置。
    
-   **背景**
    
    **参数**
    
    **说明**
    
    **粗细**
    
    中间轴线的粗细。
    
    **默认样式**
    
    中间轴线的默认颜色。
    
    **选中样式**
    
    中间轴线的选中颜色。
    

## 数据源面板![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4588141171/p783292.png)

**字段**

**说明**

`name`

轴线下侧标签显示的事件文本内容。

`text`

（可选）轴线上侧标签的显示文本，对事件的补充说明。

`value`

设置事件节点的值。如果为日期格式，需要与**样式>事件节点>数据格式**配置项保持一致。

`width`

（可选）标签文本的宽度，单位为px，默认不配置。

`height`

（可选）标签文本的高度，单位为px，默认不配置。

**数据项配置**

**说明**

**数据源**

组件的数据源中通过**代码编辑**或**可视化编辑**展示了组件所包含的数据字段。也可以修改**数据类型**，灵活配置组件数据。

**数据映射**

当您需要自定义图表字段配置时，可以在**数据映射**模块设置不同的字段映射内容，将这些字段映射到组件对应的字段上。无需修改数据源中的字段，就可以实现数据的实时匹配。也可以单击![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9633269661/p524955.png)图标对字段分别样式配置。

**过滤器**

打开**过滤器**，选择已创建的数据过滤器或新建数据过滤器，并配置数据过滤器脚本，实现数据的筛选功能。详情请参见[管理数据过滤器](https://help.aliyun.com/zh/datav/datav-7-0/user-guide/manage-filters-1)。

**数据响应结果**

实时展示了组件所使用的数据。当组件数据源发生变化时，数据响应结果会对应展示最新的数据。如果系统反应延迟，您可以单击右侧的![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8276202761/p538806.png)图标，查看数据响应结果，也可以单击右侧的![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8276202761/p538808.png)图标，获取组件的最新数据。您也可以单击查看示例，查看当前组件的响应结果示例。

**禁止加载态**

勾选复选框，在组件更新和预览数据看板时，将看不到组件初始化时的加载内容，去勾选则相反。默认为去勾选状态。

**受控模式**

勾选复选框，组件初始化状态下不请求数据，仅通过全局变量或蓝图编辑器配置的方法发起请求数据；去勾选复选框，可以使用自动更新请求数据。默认为去勾选状态。

**自动更新请求**

勾选复选框，可以手动输入轮询的时间频次设置动态轮询。清除后则不会自动更新，需要手动刷新页面，或通过蓝图编辑器和全局变量事件来触发请求更新数据。

## 高级面板![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4588141171/p783295.png)

打开开关，开启关联全局变量功能。当时间轴发生变化时，会触发数据请求，抛出临时变量，动态加载不同事件的数据。默认抛出数据中的`value`值，具体配置请参见[组件交互配置](https://help.aliyun.com/zh/datav/datav-7-0/user-guide/widget-interaction-configuration)。

**说明**

您可以使用时间轴组件实现数据轮播，使用方法示例。

1.  在时间轴的**数据源**面板配置轮播的事件，并在**高级面板**中配置该参数作为交互字段。
    
2.  将时间轴组件移动到数据看板的范围外，或者把所有颜色都设置为透明，隐藏时间轴。
    
3.  在轮播组件中，调用所配置的回调ID，实现数据轮播。
    

## 蓝图交互

1.  单击页面左上角的![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7498599661/p528973.png)图标，进入**蓝图**页面。
    
2.  在**图层节点**页签下，添加当前组件至主画布中。
    
3.  查看蓝图配置参数。![image.png](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3227002961/p705807.png)
    
    -   **事件**
        
        **事件**
        
        **说明**
        
        **当数据接口请求完成时**
        
        数据接口请求返回并经过过滤器处理后抛出的事件，同时抛出处理后的JSON格式的数据。具体数据示例请参见画布编辑器中组件右侧配置面板**数据源**页签的**数据响应结果**区域。
        
        **当前值变化时**
        
        当前值发生变化时抛出的事件，同时抛出该值对应的数据项，参考数据示例。
        
        ```
        {
          "value": 2019
        }
        ```
        
    -   **动作**
        
        **动作**
        
        **说明**
        
        **导入数据接口**
        
        按组件绘制格式处理数据后，导入组件，重新绘制。不需要重新请求服务端数据，参考数据示例。
        
        ```
        [
          {
            "name": "2019年",
            "text": "事件1",
            "value": 2019,
            "width": 125,
            "height": 38
          }
        ]
        ```
        
        **请求数据接口**
        
        重新请求服务端数据，上游数据处理节点或图层节点抛出的数据将作为参数。例如时间轴配置了API数据源为`https://api.test`，传到**请求数据接口**动作的数据为`{ id: '1'}`，则最终请求接口为`https://api.test?id=1`。
        
        **移动到**
        
        移动到某一个事件节点，并抛出回调值，参考数据示例。
        
        ```
        {
          "value": 2019
        }
        ```
        
        **停止轮播**
        
        停止时间轴轮播功能，不需要参数。
        
        **开始轮播**
        
        开始时间轴轮播功能，不需要参数。
        
        **移动**
        
        将组件移动到指定位置，参考数据示例。
        
        ```
            {
              // 移动方式。绝对定位：to，相对定位：by。默认值：to。
                "positionType": "to",
              // 指定位置。x坐标，y坐标。
              "attr": {
                "x": 0,
                "y": 0
              },
              // 动画方式。
              "animation": {
                "enable": false,
                // 动画延时。
                "animationDuration": 1000,
                // 动画曲线。可选值为：linear|easeInOutQuad|easeInOutExpo。
                "animationEasing": "linear"
              }
            }
        ```
        
        **切换显隐**
        
        切换组件显示或隐藏，不需要参数。
        
        **显示**
        
        显示组件，参考数据示例。
        
        ```
        {
          "animationType": "",//动画方式，可选值：fade，不填无动画。
          "animationDuration": 1000,//动画延迟，单位ms。
          "animationEasing": ""//动画曲线
        }
        ```
        
        **隐藏**
        
        隐藏组件，参考数据示例。
        
        ```
        {
          "animationType": "",//动画方式，可选值：fade，不填无动画。
          "animationDuration": 1000,//动画延迟，单位ms。
          "animationEasing": ""//动画曲线
        }
        ```
        
        **更新组件配置**
        
        动态更新组件的样式配置。需要先在组件的**样式**面板中，单击**复制配置到剪贴板**，获取组件配置数据。再根据需要在蓝图编辑器配置页面的数据处理节点中更改对应样式的字段值。
        

## **案例演示**

本案例通过时间轴的轮播功能实现高考各阶段复习内容的倒计时动态展示。

1.  登录[DataV控制台](https://datav.aliyun.com/v/console/)。
    
2.  选择任一数据看板，单击**编辑**，进入画布编辑器页面。
    
3.  添加**时间轴**、**倒计时**和**单张图片**三个组件到画布中。
    
4.  单击时间轴，选择**数据源**面板，修改静态数据。
    
    ```
    [
      {
        "name": "2024-04-01 00:00:00",
        "value": 20240401,
        "text": "第一轮-基础夯实"
      },
      {
        "name": "2024-05-01 00:00:00",
        "value": 20240501,
        "text": "第二轮-答题技巧"
      },
      {
        "name": "2024-06-01 00:00:00",
        "value": 20240601,
        "text": "第三轮-总结提升"
      },
      {
        "name": "2024-07-15 00:00:00",
        "value": 20240715,
        "text": "第四轮-超越自我"
      },
      {
        "name": "2024-08-07 00:00:00",
        "value": 20240807,
        "text": "高考"
      },
      {
        "name": "2024-09-25 00:00:00",
        "value": 20240925,
        "text": "高考-填报志愿"
      }
    ]
    ```
    
5.  选择**样式**面板，修改间隔时间和停留时间。
    
6.  同时选择单张图片和倒计时，右键单击**成组**。
    
7.  同样制作类似组共6个，进行编号并隐藏。
    
8.  单击**单张图片**，选择样式面板，依次将准备好的6张图片内容进行替换。
    
9.  单击页面左上角的![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7498599661/p528973.png)图标，进入**蓝图**页面。
    
10.  在**图层节点**页签下，添加六个倒计时、六个组和时间轴共计13个组件至主画布中。
     
11.  在**逻辑节点**页签下，添加1个多路判断节点、5个序列执行节点和1个定时器节点到主画布中。
     
12.  连接组件。![image.png](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3227002961/p705857.png)
     
13.  配置各节点处理方法。
     
     -   多路判断![image.png](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3227002961/p705859.png)
         
         ```
         return data.value == '20240401';//case-1
         return data.value == '20240501';//case-2
         return data.value == '20240601';//case-3
         return data.value == '20240715';//case-4
         return data.value == '20240807';//case-5
         return data.value == '20240925';//case-6
         ```
         
     -   序列执行：共计6个，显示锚点的处理方法相同如示例，延迟默认不变。显示连接两处，一处为组节点的显示动作处，一处为倒计时节点的导入数据处。延迟直接连接定时器的开始计时处。![image.png](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3227002961/p705860.png)
         
         ```
         return [{ "endTime": data.name }]
         ```
         
     -   时间器：设置延迟时间为1.5秒，后端连接组节点的隐藏动作。
         
14.  单击页面右上角的**预览**，预览展示结果。