  使用一键迁移将基础平面地图1.x版本升级到2.0版本-DataV数据可视化-阿里云

本文档对DataV基础平面地图组件的一键迁移功能进行详细说明，帮助您快速了解基础平面地图从1.x版本迁移到2.x版本之后的差别。

## 什么是一键迁移

简而言之，这是一个将最新版基础平面地图1.x 组件升级到基础平面地图2.x的过程。

在您单击一键迁移按钮后，DataV会在不影响旧版基础平面地图1.x的基础上，按照旧版组件的配置为您创建出全新的基础平面地图2.x组件。

**说明**

-   一键迁移组件的过程是一个添加组件的过程，而不是新版组件直接覆盖旧版组件的过程。
-   被迁移新添加出来的基础平面地图2.x组件不会影响到您当前的可视化应用和旧版组件。

## 一键迁移具体操作步骤

首先确保您的可视化应用中已添加的是基础平面地图1.x版本组件。

1.  在画布编辑器内，单击画布中的基础平面地图1.x组件。
2.  在右侧配置面板中，单击名称右侧的更新版本按钮（![更新版本](//help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0399771951/p110035.png)）。
    
    **说明** 如果您的可视化应用中的基础平面地图组件已经是最新1.x版本，则可以忽略此步骤。
    
3.  更新基础平面地图1.x组件（包括所有子组件）完成后，单击名称右侧的一键迁移按钮。![一键迁移入口](//help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0399771951/p81193.png)
4.  在查看迁移时出现的对话框中的注意事项等内容后，单击右下角的迁移按钮。
5.  单击对话框右下角的确定按钮，完成基础平面地图组件的迁移。![迁移成功确定弹框](//help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0399771951/p81203.png)
6.  完成迁移后可视化应用中会新增一个名为基础平面地图-2.0版的全新地图组件。![完成迁移新增组件](//help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1399771951/p81204.png)

## 一键迁移功能有哪些适用对象

当您遇到如下情况时建议使用一键迁移功能。

当您的可视化应用已经添加了基础平面地图1.x组件，且当前基础平面地图1.x满足不了您目前对该组件的需求，甚至您对该组件已经配置了特别复杂的配置项，难以通过直接添加基础平面地图2.x来复原旧版的配置时。

## 哪些情况不需要使用一键迁移功能

当您遇到如下几种情况时不建议使用一键迁移功能。

-   您的可视化应用中原先没有添加基础平面地图1.x组件，如现在有需要添加时，您可以从组件列表中添加一个基础平面地图2.x新组件。
-   您可视化应用中的基础平面地图1.x没有过多的配置内容过，甚至不太想要这个旧版组件时，可以删除旧版组件，然后从组件列表中添加一个基础平面地图2.x新组件。
-   您可视化应用中的基础平面地图1.x版本组件目前功能足够满足需求时。
-   您可视化应用中的基础平面地图组件，目前还没升级到最新版，说明您还未体验过基础平面地图1.x版本的全部功能。此时建议您慎重选择一键迁移功能，可以先体验完基础平面地图1.x版的全部功能，如果感觉功能依旧不够满足需求的情况下再进行迁移。

## 新旧版本功能差异

  

功能说明

基础平面地图1.x版本

基础平面地图2.x版本

性能

最多只支持5000个散点。

极致的渲染性能，新增离屏渲染、缓存帧动画和算法加速等，能支持10W+的散点，极大的提升了绘制和交互的性能。

配置项

按业务需求进行的配置项。

更通用、科学的配置项梳理。

层级调整

添加后没法进行层级修改。

更科学的层级排布，可随意拖拽层级。

子组件支持

所有1.x版本子组件，包括：高德在线底图、区域热力层、呼吸气泡层、区域下钻热力层、飞线层、网格热力层、点热力层、背景层、等值面层、线热力层、点聚合、散点层、流式气泡层和底图层。

除了包含1.x版本所有子组件外，额外新增了：高性能矢量散点层、高性能图标散点层、文字标注层、蜂窝热力层与网格热力层。

子组件可见级别控制

不支持当父组件缩放到某个级别时，此子组件是否可见。

支持当父组件缩放到某个级别时，此子组件是否可见。

## 一键迁移注意事项和指导修复

以下情况在迁移之前需要特别注意：

-   您对旧版基础平面地图组件配置的蓝图交互并不会随着组件一起迁移，蓝图的配置需要您在迁移后的新版组件内重新配置。（考虑到蓝图功能众多，如果跟着迁移会带来风险）。
-   您的hook也不会随着旧版基础平面地图组件一起迁移。
-   如果您的可视化应用正在使用中，并且还未创建快照，建议您迁移前先打开快照功能，以防迁移后的新组件影响您可视化应用的使用。

以下情况在迁移之后需要根据指导来修复：

-   点聚合层： 新版和旧版的点聚合层子组件布局看起来不一致了。新版点聚合算法进行了优化，对所有点位进行网格化处理，并统计每个网格内的点位数量，性能比旧版本点密度算法更高，视觉布局效果也更佳合理。
-   背景层：背景层子组件如果使用的是simple坐标参考系，不支持升级。新版基础平面地图组件目前只支持GCJ-02坐标系，不再兼容通过子组件修改地图坐标系为simple坐标参考系。自定义坐标系后续规划中。

<-help;script>$icmsDocProps={'productMethod':'created','language':'zh-CN',};<-help;/script>-help;