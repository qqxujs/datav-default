<!DOCTYPE html> 

水平基本柱状图是柱状图的一种，支持自定义x轴区间、多系列数据配置以及堆叠式的数据展示，可以在较小的可视化应用空间内，智能地展示多维的数据差异。本文介绍水平基本柱状图各配置项的含义。

## 配置

**重要** 

本文介绍v3.x版本的水平基本柱状图的配置项，如需查看v3.0以下版本或者v4.0及以上版本，请参见[水平基本柱图（v3.0以下版本）](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/stacked-bar-chart-of-v3-0-and-earlier#concept-slz-1tj-bfb)或[水平基本柱状图（v4.0及以上版本）](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/the-horizontal-stacked-bar-chart-widget#concept-2448735)。

* **搜索配置**：单击**配置**面板右上角的**搜索配置**，可在**搜索配置**面板中输入您需要搜索的配置项名称，快速定位到该配置项，系统支持模糊匹配。详情请参见[搜索资产配置](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/search-for-configurations#task-2376842)。
* **图表尺寸**：包括组件的宽度和高度，单位为px。可单击![锁定长宽比按键](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0429559951/p53660.png)图标锁定组件的宽高比，等比例修改组件的宽高。再次单击进行解锁，解锁后宽高比不受限制。
* **图表位置**：包括组件的**横坐标**和**纵坐标**，单位为px。**横坐标**为组件左上角距离页面左边界的像素距离，**纵坐标**为组件左上角距离页面上边界的像素距离。
* **旋转角度**：以组件的中心为中心点，进行旋转，单位为度（°）。  
  * 手动输入角度值，控制组件的旋转角度。
  * 拖动![圆圈旋转控制图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0429559951/p53668.png)图标内的黑点，控制组件的旋转角度。
  * 单击![左右翻转图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0429559951/p53669.png)图标，控制组件左右翻转样式。
  * 单击![上下翻转图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1429559951/p53670.png)图标，控制组件上下翻转样式。
* **不透明度**：取值范围为0\~1。为**0**时，图表隐藏；为**1**时，图表全部显示。默认为**1**。
* **图表**![水平基本柱图图表样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6728068951/p85216.jpg)

  * **边距**

| **参数** | **说明**       |
| ------ | ------------ |
| **顶部** | 柱图与组件上边界的距离。 |
| **底部** | 柱图与组件下边界的距离。 |
| **左侧** | 柱图与组件左边界的距离。 |
| **右侧** | 柱图与组件右边界的距离。 |
  * **最多加载**：自定义输入数据加载限制数量，系统最多加载您输入的数据记录条数进行布局、绘制与计算，以保证可视化应用展示效果。
  * **柱图样式**：柱图中每个柱子的样式。  

**背景颜色**：柱子的背景颜色，可参见[颜色选择器说明](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/configure-item-description#section-kdw-vj4-t2b)进行修改。
  * **值标签**：每个柱子值标签的样式，可单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标控制值标签的显隐。 ![水平基本柱图值标签样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6728068951/p85230.png)

| **参数**   | **说明**                                            |
| -------- | ------------------------------------------------- |
| **文本**   | 值标签文本的字体样式、文字粗细、字号和颜色。                            |
| **位置**   | 值标签文本的显示位置，可选**左侧**、**中间**、**右侧**和**右侧外部**四种样式。   |
| **空值数据** | 打开开关，值标签数据为空时候依旧显示在组件柱体中；关闭开关，值标签数据为空时候不显示在组件柱体中。 |
  * **图例**：柱图的图例样式，可单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标控制图例的显隐。  

| **参数** | **说明**                                                                                                                                                            |
| ------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **文本** | 图例文本的字体样式、文字粗细、字号和颜色。                                                                                                                                             |
| **布局** | 各图例之间的位置关系。 **间距** **左右间距**：相邻图例之间左右两侧的距离，仅当有多个系列时该配置项才有效。**上下间距**：图例与组件和柱图上下边界的距离。**位置**：图例相对于组件起始坐标的位置，可选**顶部居左**、**顶部居中**、**顶部居右**、**底部居左**、**底部居中** **底部居右**。 |
* **坐标轴**：组件坐标轴包括**x轴**和**y轴**两种。  

  * **x轴**![水平基本柱图X轴样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6728068951/p58519.png)

    * **x轴可见**：开启后，组件内x轴样式显示可见；关闭后，组件内x轴样式不可见。
    * **范围**：x轴的最大值的范围值。  

**最大值**：x轴的最大值，支持自定义输入，也支持系统选择：  

      * **数据最大值**：取数据中的最大值。
      * **自动取整**：系统根据数据中的最大值、最小值和指标点的个数自动计算。
    * **轴标签**：柱图的x轴标签的样式。  

| **参数**    | **说明**                                                                                       |
| --------- | -------------------------------------------------------------------------------------------- |
| **显示格式**  | x轴标签数值显示格式的样式，可选**默认**、**11（整数）**、**11.1（浮点数）**、**11.11（浮点数）**、**11%**、**11.1%**和**11.11%**。 |
| **文本**    | x轴标签文本的字体样式、文字粗细、字号和颜色。                                                                      |
| **轴标签展示** | x轴标签的数量和单位。                                                                                  |
    * **轴线**：柱图的x轴轴线的样式，可单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标控制x轴轴线的显隐。  

**颜色**：x轴线的颜色。
    * **网格线**：柱图的x轴网格线的样式，可单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标控制x轴网格线的显隐。  

**颜色**：x轴网格线的颜色。
  * **y轴**![水平基本柱图y轴样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6728068951/p58521.png)

    * **y轴可见**：开启后，组件内y轴样式显示可见；关闭后，组件内y轴样式不可见。
    * **两边留白**：y轴上下两边留下空白的距离，取值范围为0\~1。
    * **分割间隔**：y轴上柱子与柱子之间的间隔距离，数值越大柱子越细，间隔更大，取值范围为0\~0.95。
    * **轴标签**：柱图的y轴标签的样式，可单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标控制y轴标签的显隐。  

| **参数**    | **说明**                                         |
| --------- | ---------------------------------------------- |
| **文本**    | y轴标签文本的字体样式、文字粗细、字号和颜色。                        |
| **轴标签展示** | y轴标签的角度样式，可选**水平**、**倾斜**和**垂直**三种。y轴标签的数量和单位。 |
    * **轴线**：柱图的y轴轴线的样式，可单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标控制y轴轴线的显隐。  

**颜色**：y轴线的颜色。
    * **网格线**：柱图的y轴网格线的样式，可单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标控制y轴网格线的显隐。  

**颜色**：y轴网格线的颜色。
* **系列**![柱图系列样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5928068951/p85239.png)

**数据系列**：单击右侧的![加号图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0201929951/p89097.jpg)或![垃圾桶图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3208049161/p89098.jpg)图标，添加或删除一个数据系列。 单击![横排列图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0538068951/p94076.jpg)或![竖排列图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0201929951/p94077.jpg)图标配置多个数据系列的排列样式。  

| **参数**  | **说明**                                                       |
| ------- | ------------------------------------------------------------ |
| **系列名** | 数据系列的命名，可自定义。为空时，系统会将组件数据中的s字段值作为系列名进行显示。如果不为空，您需要保证数据返回的顺序。 |
| **颜色**  | 此系列下柱图的颜色。                                                   |
* **其他**

  * **缓动动画**：柱状图的动画效果样式，单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标可开启或关闭动画效果。 ![动画面板](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7706880261/p21165.png)

| **参数**   | **说明**                                                                                             |
| -------- | -------------------------------------------------------------------------------------------------- |
| **动画设置** | **缓动效果**：动画的缓动效果，系统提供多种常见的动画缓动效果供您选择。**各系列依次动画**：打开开关，各系列柱图依次按顺序播放动画；关闭开关，全部柱形一起播放动画。              |
| **入场动画** | 组件第一次渲染动画的时长，单位为ms。                                                                                |
| **更新动画** | **更新动画时长**：组件数据更新时动画持续的时间，单位为ms。**是否从之前位置开始**：打开开关，组件数据更新时从上一个数据的位置开始播放动画；关闭开关，组件数据更新时从初始位置开始播放动画。 |
  * **提示框**：在预览或发布页面，鼠标悬浮或单击柱图时出现的提示框的样式，单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标可开启或关闭提示框 。![提示框面板](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5983409951/p44684.png)

| **参数**     | **说明**                                                                                                                                                                                                                                                                                                               |
| ---------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **消失延迟时间** | 当不满足触发条件时，提示框就会消失，此配置项设置提示框消失前延迟的时间，单位为ms。                                                                                                                                                                                                                                                                           |
| **触发方式**   | **触发类型**：提示框被触发的目标类型，可选，包括**数据项**和**坐标轴**。**触发动作**：提示框被触发的动作，可选，包括**悬浮**和**点击**。                                                                                                                                                                                                                                     |
| **文本样式**   | 提示框中文本的样式，包括文字字体样式、文字粗细、字号和颜色。                                                                                                                                                                                                                                                                                       |
| **背景框样式**  | 提示框的背景框样式。 **背景色**：提示框的背景颜色。**自定义**：提示框的宽度和高度，单位为px。单击![眼睛图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8648413261/p89095.jpg)图标可开启或关闭自义定提示框。**内边距**：提示框的内部边距，单位为px。**偏移量** **水平偏移量**：提示框相对鼠标箭头位置的水平偏移量，单位为px。**垂直偏移量**：提示框相对鼠标箭头位置的垂直偏移量，单位为px。**边框** **边框粗细**：提示框边框的粗细，单位为px。**边框颜色**：提示框的边框颜色。 |

## 数据

![数据面板](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8728068951/p85246.png)

上图中的示例JSON代码如下。 

```
[
  {
    "x": "内蒙古",
    "y": "375",
    "s": "1"
  },
  {
    "x": "内蒙古",
    "y": "180",
    "s": "2"
  },
  {
    "x": "内蒙古",
    "y": "100",
    "s": "3"
  },
  {
    "x": "浙江",
    "y": "200",
    "s": "1"
  },
  {
    "x": "浙江",
    "y": "100",
    "s": "2"
  },
  {
    "x": "浙江",
    "y": "200",
    "s": "3"
  },
  {
    "x": "辽宁",
    "y": "25",
    "s": "1"
  },
  {
    "x": "辽宁",
    "y": "125",
    "s": "2"
  },
  {
    "x": "辽宁",
    "y": "100",
    "s": "3"
  },
  {
    "x": "吉林",
    "y": "190",
    "s": "1"
  },
  {
    "x": "吉林",
    "y": "110",
    "s": "2"
  },
  {
    "x": "吉林",
    "y": "170",
    "s": "3"
  },
  {
    "x": "黑龙江",
    "y": "90",
    "s": "1"
  },
  {
    "x": "黑龙江",
    "y": "60",
    "s": "2"
  },
  {
    "x": "黑龙江",
    "y": "70",
    "s": "3"
  },
  {
    "x": "安徽",
    "y": "240",
    "s": "1"
  },
  {
    "x": "安徽",
    "y": "170",
    "s": "2"
  },
  {
    "x": "安徽",
    "y": "280",
    "s": "3"
  },
  {
    "x": "福建",
    "y": "420",
    "s": "1"
  },
  {
    "x": "福建",
    "y": "190",
    "s": "2"
  },
  {
    "x": "福建",
    "y": "390",
    "s": "3"
  }
]
```

表 1\. 字段说明

| **字段** | **说明**      |
| ------ | ----------- |
| x      | 柱图中每个柱子的类目。 |
| y      | 柱图中每个柱子的值。  |
| s      | （可选）对应系列数据。 |

## 交互

选中**启用**，开启组件交互功能。当单击水平基本柱状图的柱子时，会触发数据请求，抛出回调值，动态加载不同柱子的数据。默认抛出数据中的x、y和s值，具体配置请参见[组件回调ID配置](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/how-to-use-callback-ids-to-implement-component-linkage#concept-pbb-2vk-q2b)。 

## 蓝图编辑器交互配置

1. 在画布编辑器页面，右键单击组件，选择**导出到蓝图编辑器**。
2. 单击页面左上角的![蓝图图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2434449951/p89087.jpg)图标。
3. 在蓝图编辑器配置页面，单击导入节点栏内的**水平基本柱状图**组件，在画布中可以看到如下图所示的水平基本柱状图的蓝图编辑器配置参数。![水平基本柱状图蓝图参数](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/8728068951/p85248.jpg)

  * **事件**

| **事件**              | **说明**                                                                           |
| ------------------- | -------------------------------------------------------------------------------- |
| **当水平基本柱状图接口请求完成时** | 数据接口请求返回并经过过滤器处理后抛出的事件，同时抛出处理后的JSON格式的数据。具体数据可参见上文的[数据示例](#section-osj-8ut-jjc)。 |
| **当点击数据项时**         | 当单击水平基本柱状图的柱子时抛出的事件，同时抛出该柱子对应的数据项。                                               |
  * **动作**

| **动作**          | **说明**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| --------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **请求水平基本柱状图接口** | 重新请求服务端数据，上游数据处理节点或图层节点抛出的数据将作为参数。例如水平基本柱状图配置了API数据源为http://api.test，传到**请求水平基本柱状图接口**动作的数据为{ id: '1'}，则最终请求接口为http://api.test?id=1。                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **导入水平基本柱状图接口** | 按组件绘制格式处理数据后，导入组件，重新绘制。不需要重新请求服务端数据。具体数据可参见上文的[数据示例](#section-osj-8ut-jjc)。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **高亮**          | 高亮数据项对应的元素。参数示例如下。 {   data: {     x: '上海' //可列举多个高亮条件，类似filter。   },   options: {     style: {       fill: 'red'     },     selectMode: 'single',     cancelHighlightFirst: true   } }                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **取消高亮**        | 取消数据项对应元素的高亮。参数示例如下。 {   data: {     x: '上海'   },   options: {     mode: 'single' // 当为single时，多个数据项命中时，只取消一个高亮；当为multiple时，多个数据项命中时，取消所有高亮。   } }                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **清空组件**        | 清空组件数据，不需要参数。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **更新组件配置**      | 动态更新组件的样式配置。需要先在组件的**配置**面板中，单击**复制配置到剪贴板**，获取组件配置数据。再根据需要在蓝图编辑器配置页面的数据处理节点中更改对应样式的字段值。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **显示**          | 显示组件，不需要参数。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **隐藏**          | 隐藏组件，不需要参数。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **切换显隐状态**      | 切换组件显示或者隐藏。    {       // 显示为true，隐藏为false。       "status": true,       // 显示动画。       "animationIn": {         // 动画方式，可选fade，不填无动画。         "animationType": "fade",         // 显示延时，单位为ms。         "animationDuration": 1000,         // 显示动画函数，可选linear\|easeInOutQuad|easeInOutExpo。         "animationEasing": "linear"       },       // 隐藏动画。       "animationOut": {         // 动画方式，可选fade，不填无动画。         "animationType": "fade",         // 隐藏延时，单位为ms。         "animationDuration": 1000,         // 隐藏动画函数，可选linear|easeInOutQuad|easeInOutExpo。         "animationEasing": "linear"       }     } |
| **移动**          | 将组件移动到指定位置。    {       // 移动方式。绝对定位：to，相对定位：by。默认值：to。         "positionType": "to",       // 指定位置。x坐标，y坐标。       "attr": {         "x": 0,         "y": 0       },       // 动画方式。       "animation": {         "enable": false,         // 动画延时。         "animationDuration": 1000,         // 动画曲线。可选值为：linear\|easeInOutQuad|easeInOutExpo。         "animationEasing": "linear"       }     }                                                                                                                                                                                                                 |