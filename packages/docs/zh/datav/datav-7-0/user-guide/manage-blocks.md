<!DOCTYPE html> 

区块是基于基础组件封装的高级功能模块，作为黑盒工具，它能够定义内外数据传输，内部封装了组件样式、布局、默认数据（不含动态数据源）和蓝图逻辑，外部则定义了业务相关的数据接口。本文将介绍如何创建和管理区块，帮助用户高效完成区块设计与应用。

## **使用限制**

区块功能为专业版及以上版本专属特性，如需使用，请升级至专业版或尊享版。

## **进入区块管理**

1. 登录[DataV控制台](https://datav.aliyun.com/v/console/)。
2. 在**工作台**页面，选择左侧**组件开发**模块下的**区块**页签，进入区块管理页。

## **创建区块**

平台支持创建**空白区块**和**模板区块**，用户可根据需求选择从零开始设计或基于预设模板快速构建功能模块。

### **创建空白区块**

1. 在**区块**页面内，单击**新建区块**。
2. 在弹出的**选择区块模板**对话框中，单击对话框右下角的**直接创建**。
3. 在**新建区块**对话框中，填写新建区块的信息。![{B5B9D1FC-5975-43DA-9655-4909D307CCC5}](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6364043471/p926156.png)

|    参数    |    说明    |
|    ----    |    ----    |
|    **英文名**    |    （必填）输入区块的英文名，20字符以内的英文，数字及中划线，不可以有空格，创建后不可修改。如block-test-xz，英文名称必须是唯一的，不能与系统中其它区块重名。    |
|    **显示名**    |    （必填）输入区块的显示名，20字符以内，不可包含特殊字符，可随时修改。如测试区块，可以与系统中其它区块重名。    |
|    **预设尺寸**    |    预先设定区块的尺寸大小，系统默认有多种选择，可选：**横向（适用PC）480x260px** **横向（适用PC）900x260px** **纵向布局（适用大屏）260x940px** **纵向布局（适用大屏）380x940px** **纵向布局（适用大屏）480x940px**    |
4. 区块信息填写完成后，单击**确定**，完成创建一个空白区块。创建完成后系统会自动跳转到[区块编辑器](/zh/datav/datav-7-0/user-guide/block-editor-overview-7-0/)面板中。  
新创建的区块会自动显示在**区块**页面列表中。

### **创建模板区块**

1. 在**区块**页面内，单击页面上方的**新建区块**。
2. 在弹出的**选择区块模板**对话框中，鼠标移动到模板区块上，单击**新建区块**。
3. 在弹出的**创建区块**对话框中，填写被创建的区块信息。![{1192CA21-C3A7-491F-ABB3-723BB74E8FFE}](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6364043471/p926164.png)

|    参数    |    说明    |
|    ----    |    ----    |
|    **英文名**    |    （必填）输入模板区块的英文名，20字符以内的英文，数字及中划线，不可以有空格，创建后不可修改。如block-test-xz，英文名称必须是唯一的，不能与系统中其它区块重名。    |
|    **显示名**    |    （必填）输入模板区块的显示名，20字符以内，可随时修改。如测试区块，可以与系统中其它区块重名。    |
4. 区块信息填写完成后，单击**确定**，完成创建一个空白区块。创建完成后系统会自动跳转到[区块编辑器](/zh/datav/datav-7-0/user-guide/block-editor-overview-7-0/)面板中。  
新创建的区块会自动显示在**区块**页面列表中。

## **添加区块**

通过添加区块功能，您可以在DataV可视化应用项目中添加自定义创建的区块资源，配置所需要的应用样式。

1. 在**区块**页面中，鼠标移动到目标区块上，单击**查看区块**。
2. 单击**组件库**页签中的**区块**，展开区块模块内的所有区块内容。
3. 在区块列表中，查看所需的区块，单击该区块，即可添加区块到画布编辑器中。

**说明**  
区块添加至画布后，可自由移动区块或拖动边缘圆点调整大小。
4. 您可以选中画布中已添加的区块，在右侧面板中查看该区块组件对应的**样式**、**数据源**和**高级**页签内容。区块配置与[组件配置方法](/zh/datav/datav-7-0/user-guide/configuration-items)一致。

## **编辑区块**

区块支持通过[区块编辑器](/zh/datav/datav-7-0/user-guide/block-editor-overview-7-0/)进行配置和使用。

## **区块管理**

区块管理支持添加复制、删除和授权等操作，方便用户灵活管理和调整区块内容，提升看板设计的效率与协作性。

###   **删除区块**

1. 在**区块**页面中，单击待复制区块名称右侧的![删除](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7922054261/p258843.jpg)图标，选择**删除**。
2. 单击对话框右下角的**确定**即可删除当前区块；单击**取消**即可取消删除操作。

**说明** 

删除区块后，已添加到可视化应用上的区块功能仍然可以使用，但无法从资产列表中再次添加该区块。

### **复制区块**

1. 在**区块**页面中，单击待复制区块名称右侧的![删除](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7922054261/p258843.jpg)图标，选择**复制**。
2. 在**复制**对话框中输入区块的**英文名**、**显示名**和**预设尺寸**，单击右下角的**确定**即可复制该区块到当前工作空间账号下，并跳转到区块编辑器中。

### **重命名区块**

在**区块**页面中，单击区块名称左侧的![重命名图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0232054261/p258842.jpg)图标，在重命名输入框中自定义修改名称，完成后单击空白处或按下**回车键**即可完成重命名。

## **区块授权与拷贝**

区块功能集成了权限管理与共享拷贝能力，为用户提供安全可控的区块协作解决方案。

### **授权区块**

用户可灵活配置区块访问权限，实现细粒度的数据安全管理与控制。

1. 在**区块**页面中，单击待复制区块名称右侧的![删除](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7922054261/p258843.jpg)图标，选择**授权**。
2. 在**区块授权**对话框中，输入目标用户的**用户识别码**，设置区块使用的**截止时间**，然后单击右下角的**授权**按钮，即可将该区块的使用权限授予其他用户。

**说明**  
  * 在控制台首页，单击右上角账号旁的下拉列表，即可查找您的**用户识别码**。
  * 区块授权的默认权限等级为**订阅者**，订阅者仅可在编辑页的区块列表中查看和使用已上线的区块。
3. 授权后，您可以单击区块名称后的**授权**，进入**区块授权**对话框，在已授权记录中查看授权记录。如果您需要解除授权，单击**操作**列的**解除授权**，在弹出的确认对话框中单击**确定**，即可解除该区块的授权。

### **拷贝区块**

区块支持拷贝给他人操作，为用户提供灵活的区块管理方式和高效的团队协作体验。

1. 在**区块**页面中，单击待复制区块名称右侧的![删除](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7922054261/p258843.jpg)图标，选择**拷贝给他人**。
2. 在弹出对话框中输入目标**用户识别码**，单击**确认**即可将当前区块复制至该用户账号。

**说明** 
* 在控制台首页，单击右上角账号旁的下拉列表，即可查找您的**用户识别码**。
* 如果被拷贝的用户缺少区块内的组件权限，则拷贝失败。

## **发布与预览区块**

在区块管理中，发布与预览功能使用户能够在正式发布前预览区块，确保内容和样式符合预期。通过预览区块，用户可以实时查看效果并进行必要的调整和优化，从而提升区块的质量和一致性。

### **预览区块**

1. 在**区块**页面中，鼠标悬停至目标区块，单击**查看区块**，进入区块编辑器。
2. 在区块编辑器页面中，单击右上角的![预览区块图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4123054261/p254797.jpg)图标预览区块页面。
3. 在预览页内，您可以查看区块的整体样式，并配置右侧的**样式**、**数据**、**事件**和**动作**等功能。操作示例如下表：

|    名称    |    操作    |
|    ----    |    ----    |
|    样式    |    在样式页签内配置不同的样式，请参考[配置项说明](/zh/datav/datav-7-0/user-guide/configuration-items)。如下图所示，在样式页签中，将**轮播列表**组件中的**表头**配置项内的**背景颜色**设置成红色。![测试样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4123054261/p283952.png)    |
|    数据    |    在数据页签内，输入不同的数据内容，并查看内部组件的数据配置和对应的样式是否符合调整的预期。如下图所示，可以在右侧数据页签输入额外的数据，单击下方的**测试**按钮，即可查看对应组件中显示数据内容的变更。 输入不同数据![输入不同数据](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4123054261/p283984.png) 测试新增数据成果![测试新增数据成果](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4123054261/p283985.png)    |
|    事件    |    在事件页签中，单击某个事件对应区块中的组件，查看组件内部抛出的数据在事件页签中是否正确。如下图所示，单击**轮播列表**组件中的一行数据，可以在右侧**轮播列表点击**事件页签中的**事件响应结果**处，监听**轮播列表**组件被单击时抛出的数据。![测试监听事件响应示例](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9704285261/p283988.png)    |
|    动作    |    在动作页签中，针对某个动作输入不同的参数，查看该动作对应内部组件的行为是否符合预期。如下图所示，可以在右侧动作页签的**更新样式**下的**测试参数**输入框中输入颜色参数，把**垂直胶囊柱状图**的柱子边框颜色变为绿色。![测试修改动作参数样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4123054261/p283996.png)    |
4. 单击预览页面右上角的![返回编辑图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0304964261/p282436.jpg)图标，即可返回区块编辑页面继续编辑区块内容。  
如果预览成功且区块内容各功能测试后符合预期，可将区块发布到线上环境供其他人员在后续的可视化应用中直接添加使用。

### **发布区块**

1. 在**区块**页面中，单击目标区块，进入区块编辑器，单击右上角的![发布图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/5123054261/p255090.jpg)图标发布区块。
2. 在**发布区块**对话框中，输入本次发布的区块自定义备注内容，单击右下角的**确认**。

**说明**  
如果非首次发布，您可以查看区块上次发布的版本号和发布时间。  
发布成功后的区块，可在DataV控制台的**我的资产**页签下的**区块**中，单击某一区块的**查看历史**处，查看该区块的历史版本。

## **区块版本与资产管理**

### **区块版本历史管理**

区块的版本历史功能仅在区块发布后可用。每次发布都会为当前区块内容生成一个快照，并分配一个新的版本号。未发布过的区块不会生成历史版本信息。

1. 在**区块**页面中，单击某个区块上的**查看历史**。
2. 在右侧弹出的历史版本面板中，您可以查看当前区块的所有版本，包括区块的**版本号**、**发布时间**、**说明**、**状态**和**操作**等信息。![{9CB1834E-63CF-4FC6-88EA-D6B41214977D}](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6364043471/p926215.png)

|    区块版本信息参数    |    说明    |
|    ----    |    ----    |
|    **版本号**    |    每个区块支持多版本，最新版本号为当前已发布的最大版本号。如需更新，请在画布编辑器中单击升级至最新版本。    |
|    **发布时间**    |    每一个版本区块的发布详细时间。    |
|    **说明**    |    发布区块时自定义设置的版本情况说明。    |
|    **状态**    |    区块版本的上下线状态。    |
|    **操作**    |    针对不同状态下的历史版本的区块，可对区块进行**上线**或**下线**的操作。**上线**：单击一个**未上线**状态下区块右侧的![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4952082761/p523940.png)即可。**下线**：单击一个**已上线**状态下区块右侧的![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4952082761/p523941.png)即可。    |

**说明**  
默认情况下，区块发布后即处于**已上线**状态。上线后，您可以在可视化应用画布编辑器中单击**升级**按钮，将区块更新至最新版本后继续使用。

### **升级收藏资产为区块**

1. 在**工作台**页面，选择左侧**资源管理**模块下的**组件收藏**页签。
2. 鼠标悬停至某个收藏的组件上方，单击![{4253F8DC-59D7-4075-B4F4-F195879F2A52}](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6364043471/p926229.png)图标，进入**升级成区块**页面。![image](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6364043471/p926225.png)
3. 在页面中，按命名要求填写区块的**英文名**和**显示名**。  
![{B8153B15-E9C4-45EE-BEC7-B9448D358453}](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6364043471/p926233.png)

**重要**  
只有配置了静态数据或API数据源的收藏资产，才能在升级为区块时生效，同时您需配置内部数据的传输逻辑。
4. 完成区块配置项的填写后，单击右下角的**确定**按钮，即可将资产成功升级为区块。  
升级后的区块会自动显示在**区块**管理页面中。