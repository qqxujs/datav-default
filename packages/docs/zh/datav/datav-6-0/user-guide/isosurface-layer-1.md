<!DOCTYPE html> 

等值面层是基础平面地图的子组件，适用于将已知的矢量点数据制作成栅格区域图进行大屏展示，例如使用等值面组件，实时插值出全国的空气质量图，满足一些气象等行业的可视化需求。本文介绍等值面层各配置项的含义。

**重要** 

当前为v2.x版本的等值面层子组件指导文档，如需查看该子组件v1.x版本的文档内容详情，请参见[等值面层（v1.x版本）](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/isosurface-layer#concept-vv3-4md-2gb)。

单击**子组件管理**下方的**等值面层**，进入配置面板配置**等值面层**的样式和数据。 

**说明** 

如果**子组件管理**中没有**等值面层**，说明您还未添加**等值面层**子组件，请参见[地图容器（v2.x版本）](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/map-container#concept-2400968)进行添加。

## 配置

![配置](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3230904561/p446191.png)

* **搜索配置**：单击**配置**面板右上角的**搜索配置**，可在**搜索配置**面板中输入您需要搜索的配置项名称，快速定位到该配置项，系统支持模糊匹配。详情请参见[搜索资产配置](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/search-for-configurations#task-2376842)。
* **可见级别**：设置等值面层的可见级别值，在设定的级别范围内等值面层可见，级别之外不可见。
* **透明度**：等值面层的透明度。
* **像元大小**：栅格区域图每个格子的像素大小，范围为1\~10。像元越小，等值面层越清晰，渲染时间越长；像元越大，等值面层越模糊，渲染时间越短。
* **权重**：插值点对周围点的影响，范围为0.5～3。权重越大影响越大，渲染效果越好，但渲染时间越长。
* **渲染方式**：等值面层的渲染方式，系统提供**线性渲染**和**分段渲染**两种方式。  

  * **线性渲染**

| **参数**   | **说明**                                                                                                                                                                                                                                          |
| -------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **中断值**  | 线性渲染的中断值。DataV会根据您设置的中断值，结合value值的区间，得到中间的value值对应的插值点，这个点的颜色就是您设置的**中间颜色**。                                                                                                                                                                    |
| **填充颜色** | 填充色包括**最小颜色**、**中间颜色**和**最大颜色**。 **最小颜色**：value值最小的插值点的颜色，请参见[颜色选择器说明](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/configure-item-description#section-kdw-vj4-t2b)进行修改。**中间颜色**：value值处于最大值和最小值之间时，对应插值点的颜色。**最大颜色**：value值最大的插值点的颜色。 |
| **分类数目** | 插值点的分类个数。DataV会根据您设置的**分类数目**，结合value值的区间，将插值点分成多个类别，每种类别对应不同的颜色。**分类数目**越多，插值效果越好，但渲染时间越长。                                                                                                                                                     |
  * **分段渲染**

| **参数**   | **说明**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **中断值**  | 线性渲染的中断值。DataV会根据您设置的中断值，结合value值的区间，得到中间的value值对应的插值点，这个点的颜色就是您设置的**中间颜色**。                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **默认颜色** | 插值点的默认颜色。当插值点的value值不在您所设置的分段区间时，使用此默认颜色。                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| **分段设色** | 单击右侧的![加号图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0201929951/p89097.jpg)或![垃圾桶图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/3208049161/p89098.jpg)图标，添加或删除一个分段。单击![横排列图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0201929951/p95437.jpg)或![竖排列图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0201929951/p94077.jpg)图标配置多个分段的排列样式。 **分段区间**：分段的区间值。您可以根据数据中插值点的value值区间进行调整。**分段颜色**：value值在您所设置的**分段区间**内的插值点的颜色。 |

## 数据

* **插值点数据接口**![等值面层插值点数据V2.X](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0111884261/p81674.jpg)可查看上图中的[示例JSON代码](http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/attach/30366/cn%5Fzh/1557130921721/Basicmap%5FIsosurface%5Flayer%5Fexample01.json)。  
表 1\. 字段说明

| **字段** | **说明**                                               |
| ------ | ---------------------------------------------------- |
| lng    | 插值点的经度。                                              |
| lat    | 插值点的纬度。                                              |
| value  | 插值点的value值。DataV会根据value值，结合配置面板中的渲染配置项，调整等值面层的渲染效果。 |
* **裁剪边界数据接口**![等值面层裁剪面数据v2.x](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0111884261/p81677.png)  
可查看上图中的[示例JSON代码](http://docs-aliyun.cn-hangzhou.oss.aliyun-inc.com/assets/attach/30366/cn%5Fzh/1557130767876/Basicmap%5FIsosurface%5Flayer%5Fexample.json)。  
裁剪边界定义了需要渲染的插值点的范围。例如上图中，裁剪边界数据定义了整个带颜色区域的中国地图。

| **配置项**    | **说明**                                                                                                                                                                |
| ---------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **受控模式**   | 打开开关，资产初始化状态下不请求数据，仅通过回调ID或蓝图编辑器配置的方法发起请求数据；关闭开关，可以使用自动更新请求数据。开关默认为关闭状态。                                                                                              |
| **自动更新请求** | 选中后可以设置动态轮询，还可以手动输入轮询的时间频次。取消选中后则不会自动更新，需要手动刷新页面，或通过蓝图编辑器和回调ID事件来触发请求更新数据。                                                                                            |
| **数据源**    | 单击**配置数据源**，可在**设置数据源**面板中修改数据源类型和数据查询代码、预览数据源返回结果以及查看数据响应结果，详情请参见[配置资产数据](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/configure-widget-data#task-2376875)。 |
| **数据过滤器**  | 数据过滤器提供数据结构转换、筛选和一些简单的计算功能。单击**添加过滤器**，可在**设置数据源**面板配置数据过滤器脚本，详情请参见[过滤器使用说明](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/use-the-data-filter#task-1322674)。 |
| **数据响应结果** | 展示数据请求的响应结果。当数据源发生改变时，可单击右侧的![刷新图标 ](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/0376703061/p89093.png)图标，实时查看数据响应结果。                                |

## 交互

此组件没有交互事件。

## 蓝图编辑器交互配置

1. 在画布编辑器页面，单击**基础平面地图**子组件管理列表中**等值面层**右侧的![导出到蓝图编辑器](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2434449951/p89089.jpg)图标。
2. 单击页面左上角的![蓝图图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2434449951/p89087.jpg)图标。
3. 在蓝图编辑器配置页面，单击导入节点栏内的**等值面层**组件，在画布中可以看到如下图所示的等值面层的蓝图编辑器配置参数。![等值面层蓝图编辑器参数 v2.x](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/1111884261/p81678.jpg)

  * **事件**

| **事件**             | **说明**                                                                                                               |
| ------------------ | -------------------------------------------------------------------------------------------------------------------- |
| **当插值点数据接口请求完成时**  | 插值点数据接口请求返回并经过过滤器处理后抛出的事件，同时抛出处理后的JSON格式的数据。具体数据示例请参见画布编辑器中组件右侧配置面板**数据**页签的**数据响应结果**区域。                            |
| **当裁剪边界数据接口请求完成时** | 裁剪边界数据接口请求返回并经过过滤器处理后抛出的事件，同时抛出处理后的JSON格式的数据。具体数据示例请参见画布编辑器中组件右侧配置面板**数据**页签的**数据响应结果**区域。                           |
| **当插值点数据接口请求失败时**  | 插值点数据接口请求失败时（请求失败的情况可能是：网络问题或接口报错等）返回并经过过滤器处理后抛出的事件，同时抛出处理后的JSON格式的数据。具体数据示例请参见画布编辑器中组件右侧配置面板**数据**页签的**数据响应结果**区域。  |
| **当裁剪边界数据接口请求失败时** | 裁剪边界数据接口请求失败时（请求失败的情况可能是：网络问题或接口报错等）返回并经过过滤器处理后抛出的事件，同时抛出处理后的JSON格式的数据。具体数据示例请参见画布编辑器中组件右侧配置面板**数据**页签的**数据响应结果**区域。 |
  * **动作**

| **动作**         | **说明**                                                                                                                           |
| -------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| **请求插值点数据接口**  | 重新请求服务端数据，上游数据处理节点或图层节点抛出的数据将作为参数。例如等值面层配置了API数据源为http://api.test，传到**请求插值点数据接口**动作的数据为{ id: '1'}，则最终请求接口为htp://api.test?id=1。   |
| **请求裁剪边界数据接口** | 重新请求服务端数据，上游数据处理节点或图层节点抛出的数据将作为参数。例如等值面层配置了API数据源为http://api.test，传到**请求裁剪边界数据接口**动作的数据为{ id: '1'}，则最终请求接口为http://api.test?id=1。 |
| **导入插值点数据接口**  | 按组件绘制格式处理数据后，导入组件，重新绘制。不需要重新请求服务端数据。具体数据示例请参见画布编辑器中组件右侧配置面板**数据**页签的**数据响应结果**区域。                                                |
| **导入裁剪边界数据接口** | 按组件绘制格式处理数据后，导入组件，重新绘制。不需要重新请求服务端数据。具体数据示例请参见画布编辑器中组件右侧配置面板**数据**页签的**数据响应结果**区域。                                                |
| **显示**         | 显示组件，不需要参数。                                                                                                                      |
| **隐藏**         | 隐藏组件，不需要参数。                                                                                                                      |