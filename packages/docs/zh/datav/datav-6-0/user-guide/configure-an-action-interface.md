  配置区块动作接口供蓝图编辑器调用-DataV数据可视化-阿里云

当区块需要暴露接口供外部其他组件调用时，可创建一个动作接口。例如当外部组件需要控制区块内部垂直胶囊柱状图组件的颜色时，可创建一个更新样式的动作，在可视化应用的蓝图编辑器中使用。本文介绍区块内部的动作接口的配置的方法，帮助您理解区块的动作接口功能。

在区块编辑器内，您可以单击区块编辑器右上角的![动作图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2123054261/p283789.jpg)图标，在动作设置页签中支持如下动作配置操作。

## 切换模式

在对话框上方可以切换动作模式，可选视图模式和代码模式。

 

模式

说明

视图模式

在视图模式下，直观查看示例动作的样式，并按照示例样式自定义配置动作的内容，无需编写代码。

图 1. 视图模式下的动作面板示例

![视图模式下的动作面板示例](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9789864261/p283790.png)

代码模式

在代码模式下，您可以根据示例动作代码，自定义编写所需动作的代码，实现新增或配置动作的内容。

图 2. 代码模式下的动作面板示例

![代码模式下的动作面板示例](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9789864261/p283791.png)

**说明** 配置动作接口代码规范，请参见[组件开发规范](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/files-overview#concept-j52-1cl-q2b "本文介绍开发者在开发DataV组件时，需要遵循的文件结构。")。

## 配置动作接口

在动作设置页签中，系统默认情况下会自带配置一个动作示例，您可以自定义按操作配置动作内容。![动作接口示例](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9789864261/p283792.jpg)

 

操作

说明

展开动作详细信息列表

单击示例动作右侧的![下拉图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6669864261/p283598.jpg)图标，即可打开当前动作的详细配置信息列表。

编辑动作基本信息

每一个动作中包含多个参数内容，您可以自定义编辑动作的基本信息参数内容。

-   名称：动作的名称。
-   显示名：动作对外显示的名称。确认修改显示名后按回车键，结果会即时显示在配置面板中。
-   描述：动作的描述信息。
-   数据类型：为动作选择一个数据类型，可选对象、数组、任意值和无。

删除动作

单击动作右侧的![删除图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/6669864261/p283603.jpg)图标，即可删除当前动作。

新增动作

单击动作设置页签内的新增数据接口，即可在下方动作配置区域，新增一个新增的动作内容。

**说明** 您可以自定义新增或编辑多个动作用于区块接口使用。

## 配置动作字段

在动作配置面板中，系统默认情况下会自动添加两个示例动作字段，您可以自定义按操作配置动作字段。![动作字段示例](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9789864261/p283794.jpg)

 

操作

说明

编辑字段基本信息

每一个动作字段中包含多个字段参数内容，您可以自定义编辑字段的参数内容。

-   字段名：输入动作字段的英文名称，字段名称必须为英文字符，作为参数传递时的key。
-   中文名：输入字段的中文显示名，中文名必须控制在10字以内，用于解释字段的含义。
-   说明：输入字段的详细描述说明，字数需要控制在25字以内。
-   类型：选择字段的类型，可选字符串、数值、对象、数组、布尔值和二进制。
-   默认值：输入字段的默认值内容，可不填。
-   可选：选择字段的选择类型，包括必选和可选，可不填。

新增字段

单击字段行右侧的![新增按键](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7669864261/p283612.jpg)图标后选择添加同级，即可新增一行字段内容。

调整字段位置

当数据接口中添加了多个字段信息行后，您可以单击字段行最左侧的![调整位置图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7669864261/p287054.png)图标，并拖动字段行即可调整各字段行之间的上下排列顺序。

删除字段

单击字段行右侧的![删除字段图标](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/7669864261/p283644.jpg)图标，即可删除字段内容。

**说明** 当您删除完列表内所有字段后，您可以单击字段列表内的添加字段，快速添加一行字段内容。

![添加字段](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9789864261/p287825.png)

## 可视化应用中查看并使用动作接口

在区块编辑器中配置完动作接口后，您可以在可视化应用中使用区块时，在蓝图编辑器内查看到区块的所有动作接口信息，具体在可视化应用中配置并查看接口信息的步骤如下。

1.  在区块编辑器中，对配置的动作接口内容，进行预览和测试数据接口内容，接口测试无误后，发布区块，详情请参见[预览区块](https://help.aliyun.com/zh/datav/preview-a-block#task-2062250 "预览区块的目的是为了测试区块的功能可用性，模拟使用时的各种操作。本文介绍如何预览并测试一个配置完成的区块，帮助您及时了解区块的可用性，便于区块的及时修改和完善。")和[发布区块](https://help.aliyun.com/zh/datav/publish-a-block#task-2062363 "本文介绍如何发布一个区块，帮助您升级区块版本，可供后续在可视化应用中使用。")。![测试修改动作参数样式](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4123054261/p283996.png)
2.  切换到控制台上的我的可视化页面，将鼠标悬浮至一个可视化应用上方，单击编辑进入画布编辑器。
3.  单击![资产列表](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/4643285261/p292278.png)图标展开全部资产列表，选择区块模块，在区块列表内可查看到发布后的所有区块内容。
4.  单击所需区块，即可添加该区块到画布编辑器中。
5.  单击选中画布中的区块，右键单击区块，选择导出到蓝图编辑器。![导出区块到蓝图编辑器](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2204285261/p290533.png)
6.  切换进入蓝图编辑器面板，将区块节点拖动到蓝图编辑器的画布中，即可查看区块内所有事件和动作接口的信息。区块蓝图参数中的事件动作接口，可以在蓝图编辑器内通过连线和配置逻辑节点的方法，被其他组件调用，详情请参见[蓝图编辑器详细功能介绍](https://help.aliyun.com/zh/datav/datav-6-0/user-guide/features-1#concept-2334130 "本文为您介绍蓝图编辑器在使用过程中常用的功能详情，可以帮助您快速上手蓝图编辑器。")。![区块动作信息面板](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/2204285261/p290537.jpg)

## 实时预览动作配置

在动作设置页签中，对话框左侧是用于自定义配置动作的区域，对话框右侧为实时预览区域。所有在左侧配置完成的动作参数内容，均可直接显示在右侧预览界面，方便查看配置完成的动作内容。![预览动作区域示例](https://help-static-aliyun-doc.aliyuncs.com/assets/img/zh-CN/9789864261/p283798.png)